(function(){"use strict";angular.module("angularClazzApp",["ngAnimate","ngRoute","ngTouch","ui.ace"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("angularClazzApp").controller("MainCtrl",["$scope",function(a){return a.prelude=[{injectable:"class OO.Injectable\n  @inject: (args...) ->\n    (args.push(injectee) if args.indexOf(injectee) is -1) for injectee in [(@$inject ? [])...]\n    @$inject = args\n    @",explanation:"The inject class-method provides for angular-DI.\nInvoke it at the top of your child-class, passing in the dependencies as strings.\nEach Injectee will become available as a member var, accessible via <code>@Injectee</code>, eg. <code>@$scope</code>!\nPlease remark that some extended base classes, like the Widget-Class for example, do host certain Injectees by default."},{injectable:'class OO.Ctrl extends OO.Injectable\n  @register: (app, name) ->\n    name ?= @name or @toString().match(/functions*(.*?)(/)?[1]\n    if typeof app is "string" then angular.module(app).controller name, @\n    else app.controller name, @\n    @\nclass OO.Service extends OO.Injectable\n  @register: (app, name) ->\n    name ?= @name or @toString().match(/functions*(.*?)(/)?[1]\n    if typeof app is "string" then angular.module(app).service name, @\n    else app.service name, @\n    @',explanation:"The basic Controller vs. Service Registration class-methods. They enable auto-registration of classes as Angular-Instances.\nIf used by your child-class, you can directly access such an instance in a directive via its string-name."},{injectable:'class OO.Ctrl #continued\n  @mixin: (mixins...) ->\n    class Mixed extends @\n    for mixin in mixins\n        for name, method of mixin.prototype\n            (() ->\n                m = method\n                _m = Mixed::[name]\n                n = name\n                if name is "initialize" and Mixed::initialize?\n                    Mixed::initialize = () ->\n                        m.call @\n                        _m.call @\n                else if name isnt "constructor" and not Mixed::[name]? then Mixed::[name] = m\n            )()\n        (Mixed[name] = method) for own name, method of mixin when angular.isFunction method\n        Mixed.inject.apply Mixed, mixin.$inject\n    Mixed',explanation:"Controllers allow for smart multiple inheritance. If a method already exists down the prototype chain,\nthe current method is merged and appended after the 'older' method in a new prototypal function."},{injectable:'class Ctrl #...again continued\n  @implements: (interfaces...) ->\n    class Interfaced extends @\n    for Interface in interfaces\n        do (Interface) ->\n            Interfaced::[Interface] = () -> throw {\n                msg: "Looks like the interface _{Interface}_ hasn\'t been implemented! This will lead to unpredictable behaviour!"\n            }\n    Interfaced',explanation:"The implements class-method allows for Java-like notation. Applying it on a base class kind of forces, but really advises, the extending logic to (re-)implement the function."},{injectable:'class Ctrl #...still continued\n  constructor: (args...) ->\n    (@[key] = args[index]) for key, index in @constructor.$inject\n    for key, fn of @constructor.prototype when typeof fn is "function" and ["constructor", "initialize"].indexOf(key) is -1 and key[0] isnt "_"\n      do (key, fn) =>\n        if key.match "::"\n          t = key.split "::"\n          if t[2]? and t[2].indexOf(">") isnt -1 then t = t.splice(0, 2).concat t[0].split ">"\n          for el, i in (t[0] and Sizzle(t[0], @element?.context ? document.body) or [@$element?.context])\n            do (el, i) =>\n                listenerO = [t[1]]\n                listenerO.push(t[2]) if t[2]?\n                listenerO.push (args...) =>\n                  if t[2]?\n                      ev = args[0]\n                      if t[3]? then @$scope.n = $(ev.currentTarget).closest(t[3]).index()\n                      else (@$scope.n = j) for el, j in $(ev.currentTarget).parent().children().get() when el is ev.currentTarget\n                  fn.apply @, args\n                  if not @$scope.$$phase then @$scope.$digest()\n\n                angular.element(el).on.apply angular.element(el), listenerO\n        else\n            @$scope[key] = (args...) =>\n                fn.apply @, args\n                @\n    @initialize?()',explanation:"The Controller-Base-Class's constructor initializes and hooks into angular to realize the actual Dependency Injection.\nFurthermore it provides for can.js like jQuery-selector controller-based eventing and also provides an scoped index-var <code>@$scope.n</code>.\n(Due to this mechanism full-blown jQuery is a hard dependency of the plugin. The author dislikes the fact, but thinks it's worth it.)\nPrototype methods are available not only directly, but also are attached to <code>@$scope</code>, should they not be prefixed with an _underscrode.\nThis way, you can, should you really want to, always use angular's intrinsic system of html-attribute eventing.\nFinally it invokes, should it exist, your class's pseudo constructor: initialize."},{injectable:'class OO.DataService extends OO.Service\n    @inject "$resource", "$interval", "$q"\n    _db: (api, { @name, @persistant, @oneshot, @interval}) ->\n      @persistant ?= false\n      @oneshot = not @interval?\n      @q ?= @$q.defer()\n      @db =\n          busy: false\n          ready: false\n          handle: if api? then @$resource(api) else null\n          store: @persistant and _DB.create(@name) or []\n\n      @_api()\n      @oneshot or @$interval @_api.bind(@), @interval\n      @q.promise\n    _api: () ->\n      if @db.busy is true then return\n      @db.busy = true\n      @db.handle.get().$promise\n          .then (data) =>\n              console.info "success {@name}"\n              @_store(data[@name] ? data)\n              @db.busy = false\n              if not @persistant\n                  if @oneshot is true\n                      @q.resolve()\n                      @q = null\n                  else @q.notify(true)\n              @db.ready = true\n          .catch (err) =>\n              console.warn "err {@name}"\n              if @oneshot is true\n                  @q.reject()\n                  @q = null\n              else\n                  @q.notify(false)\n    _store: (data) ->\n      if @persistant\n          for o in data\n              do (o) =>\n                  @db.store.query((doc, emit) -> if doc.id is o.id then emit doc)\n                      .then (doc) =>\n                          console.info \'#Data for id _{o.id}_ will be updated now\'\n                          if doc.error isnt "not_found" and doc.total_rows is 1\n                              o._id = doc.rows[0].key._id\n                              o._rev = doc.rows[0].key._rev\n                      .catch (err) =>\n                          console.warn "db error: couldn\'t query for {o.id}"\n                          throw err.toString()\n                      .finally (args...) =>\n                          @db.store.put(o, o.id, o._rev)\n                              .then (response) =>\n                                  if @oneshot is true\n                                      @q.resolve()\n                                      @q = null\n                                  else @q.notify(true)\n                              .catch (err) =>\n                                  console.warn "db error: couldn\'t put {o.toString()}"\n                                  if @oneshot is true\n                                      @q.reject()\n                                      @q = null\n                                  else\n                                      @q.notify(false)\n      else\n          (o.deleted = true) for o in @db.store\n          for o in data\n              do (o) =>\n                  if (i = @db.store.indexOf(@db.store.filter (el) -> el.id is o.id)) isnt -1\n                      (@db.store[i][k] = o[k]) for own k, v of o\n                      @db.store[i].deleted = false\n                  else\n                      @db.store.push o\n                      @db.store[@db.store.length - 1].deleted = false',explanation:"The Service-Base-Class is to be used by extension asusual, invoking solely the _db method with it's params due.\nOnce initiated, everything should be automated. Long-Polling, oneshot api calls, persistance via (angular-)pouchdb or fast in-memory ...\nYou will be able to react to new data via it's (the _db methods) returned promise."},{injectable:'class OO.Widget extends OO.Ctrl\n  @inject "$element"',explanation:"Lastly, I provide for an extra Widget-Base-Class. It solely provides for the $element injectable. Please do use\nthis base class for your UI-Controllers and the Ctrl-Base-Class for any Rounting-Controllers, which are because of it's config-block early-stages initialization\nnot able to receive the $element injectable.\nThe $element injectable is needed for a certain mechanism in the eventing functionality. Basically it stops watching events further up the line as the container tag."}]}])}.call(this),function(){"use strict";angular.module("angularClazzApp").controller("AboutCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this);